package com.sankholin.banana.plug

import org.gradle.api.Plugin
import org.gradle.api.Project

class BananaPlug implements Plugin<Project> {
    void apply(Project project) {

        applyPlugins(project)
        addDependencies(project)
        addOptions(project)
        project.task('hello') {
            doLast {
                println 'Test hello ' + project.getName()
                //project.getTasks()
                println project.property('sourceCompatibility')
                //project.setProperty('sourceCompatibility', 12)
                //project.setProperty('targetCompatibility', 11)
            //    project.setProperty('group', 'net.zahi.banana')
        //        project.setProperty('version', '1.1.1-SNAPSHOT')
    //            project.setProperty('archivesBaseName', 'apple')
                println project.property('sourceCompatibility')
    //            println project.getTasks()
            //    TaskCollection.getByName('build').dependsOn('hello')
        //        project.task('build').dependsOn('hello')
            //    project.setProperty()
                //println project.getProperties()
            }
        }
    }

    void applyPlugins(Project project) {
        project.configure(project) {
            apply plugin: 'maven'
            apply plugin: 'java'
            //apply plugin: 'io.spring.dependency-management'
        }
    }

    void addDependencies(Project project) {
        project.afterEvaluate {
          //project.dependencies.add('compileOnly', "org.projectlombok:lombok:1.18.0")
        }
    }

    void addOptions(Project project) {
        project.setProperty('sourceCompatibility', 8)
    }
}
